(function(d,u,g,h,s,T){"use strict";const{View:f,Text:c,TextInput:E,TouchableOpacity:y,ScrollView:m,StyleSheet:S}=s.ReactNative;function R(){T.useProxy(h.storage);const e=h.storage;e.whitelist||(e.whitelist=[]);const[r,t]=s.React.useState(""),o=function(){const a=r.trim();a&&(e.whitelist.includes(a)||(e.whitelist.push(a),t("")))},b=function(a){e.whitelist=e.whitelist.filter(function(x){return x!==a})},i=S.create({container:{flex:1,padding:16,backgroundColor:"#1e1e1e"},section:{marginBottom:24},sectionTitle:{fontSize:14,fontWeight:"600",color:"#b9bbbe",marginBottom:8,textTransform:"uppercase"},card:{backgroundColor:"#2f3136",borderRadius:8,padding:12,marginBottom:8},input:{backgroundColor:"#202225",color:"#dcddde",borderRadius:4,padding:12,fontSize:16,marginBottom:8},button:{backgroundColor:"#5865f2",borderRadius:4,padding:12,alignItems:"center"},buttonDisabled:{backgroundColor:"#4e5058"},buttonText:{color:"#ffffff",fontSize:16,fontWeight:"600"},userRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#2f3136",borderRadius:8,padding:12,marginBottom:8},userId:{color:"#dcddde",fontSize:16,flex:1},removeButton:{backgroundColor:"#ed4245",borderRadius:4,padding:8,paddingHorizontal:12},removeButtonText:{color:"#ffffff",fontSize:14,fontWeight:"600"},emptyText:{color:"#72767d",fontSize:14,textAlign:"center",padding:16}});return s.React.createElement(m,{style:i.container},s.React.createElement(f,{style:i.section},s.React.createElement(c,{style:i.sectionTitle},"Add User to Whitelist"),s.React.createElement(f,{style:i.card},s.React.createElement(E,{style:i.input,value:r,onChangeText:t,placeholder:"Enter User ID",placeholderTextColor:"#72767d"}),s.React.createElement(y,{style:[i.button,!r.trim()&&i.buttonDisabled],onPress:o,disabled:!r.trim()},s.React.createElement(c,{style:i.buttonText},"Add User")))),s.React.createElement(f,{style:i.section},s.React.createElement(c,{style:i.sectionTitle},"Whitelisted Users (",e.whitelist.length,")"),e.whitelist.length===0?s.React.createElement(c,{style:i.emptyText},"No users whitelisted",`
`,"Guild tags hidden for all users"):e.whitelist.map(function(a){return s.React.createElement(f,{key:a,style:i.userRow},s.React.createElement(c,{style:i.userId},a),s.React.createElement(y,{style:i.removeButton,onPress:function(){return b(a)}},s.React.createElement(c,{style:i.removeButtonText},"Remove")))})))}const p=h.storage;p.whitelist??=[];const G=function(e){return e?!p.whitelist.includes(e):!0};let l=[];const n=function(e,r){if(!e||!G(r))return e;try{e.primaryGuild&&delete e.primaryGuild,e.primary_guild&&delete e.primary_guild,delete e.guildTag,delete e.guild_tag,delete e.tagText,delete e.tag_text,e.guildMemberProfile&&(delete e.guildMemberProfile.primaryGuild,delete e.guildMemberProfile.guildTag)}catch{}return e},U=function(){console.log("[HideGuildTags] \u{1F3AF} Loading with primaryGuild targeting...");try{try{const e=s.FluxDispatcher.dispatch.bind(s.FluxDispatcher);s.FluxDispatcher.dispatch=function(r){try{r&&(r.user&&n(r.user,r.user.id),r.users&&(Array.isArray(r.users)?r.users.forEach(function(t){return n(t,t?.id)}):Object.values(r.users).forEach(function(t){return n(t,t?.id)})),r.member?.user&&n(r.member.user,r.member.user.id),r.members&&Object.values(r.members).forEach(function(t){t?.user&&n(t.user,t.user.id)}),(r.type==="PRESENCE_UPDATE"||r.type==="USER_UPDATE")&&r.user&&n(r.user,r.user.id))}catch{}return e(r)},l.push(function(){s.FluxDispatcher.dispatch=e}),console.log("[HideGuildTags] \u2713 Patched FluxDispatcher (primaryGuild targeting)")}catch(e){console.log("[HideGuildTags] FluxDispatcher patch failed:",e)}try{const e=g.findByStoreName("UserStore");e&&(e.getUser&&(l.push(u.after("getUser",e,function(r,t){return t&&r?.[0]&&n(t,r[0]),t})),console.log("[HideGuildTags] \u2713 Patched UserStore.getUser")),e.getUsers&&(l.push(u.after("getUsers",e,function(r,t){return t&&typeof t=="object"&&Object.keys(t).forEach(function(o){n(t[o],o)}),t})),console.log("[HideGuildTags] \u2713 Patched UserStore.getUsers")),e.getCurrentUser&&l.push(u.after("getCurrentUser",e,function(r,t){return t&&n(t,t.id),t})))}catch(e){console.log("[HideGuildTags] UserStore failed:",e)}try{const e=g.findByStoreName("GuildMemberStore");e&&(e.getMember&&l.push(u.after("getMember",e,function(r,t){return t?.user&&n(t.user,t.user.id),t})),e.getMembers&&l.push(u.after("getMembers",e,function(r,t){try{Array.isArray(t)?t.forEach(function(o){o?.user&&n(o.user,o.user.id)}):t&&typeof t=="object"&&Object.values(t).forEach(function(o){o?.user&&n(o.user,o.user.id)})}catch{}return t})),console.log("[HideGuildTags] \u2713 Patched GuildMemberStore"))}catch(e){console.log("[HideGuildTags] GuildMemberStore failed:",e)}try{const e=g.findByStoreName("UserProfileStore");e&&(["getUserProfile","getGuildMemberProfile","getMemberProfile"].forEach(function(r){e[r]&&l.push(u.after(r,e,function(t,o){if(o){const b=t?.[0]||t?.[1];n(o,b),o.user&&n(o.user,o.user.id)}return o}))}),console.log("[HideGuildTags] \u2713 Patched UserProfileStore"))}catch(e){console.log("[HideGuildTags] UserProfileStore failed:",e)}try{const e=g.findByStoreName("PresenceStore");e&&(["getState","getStatus","getActivities"].forEach(function(r){e[r]&&l.push(u.after(r,e,function(t,o){return o}))}),console.log("[HideGuildTags] \u2713 Patched PresenceStore"))}catch(e){console.log("[HideGuildTags] PresenceStore failed:",e)}console.log("=".repeat(60)),console.log(`[HideGuildTags] \u2705 LOADED - ${l.length} PATCHES ACTIVE`),console.log("[HideGuildTags] Targeting: primaryGuild object"),console.log("[HideGuildTags] NOW:"),console.log("  1. FORCE CLOSE Discord completely"),console.log("  2. REOPEN Discord"),console.log("  3. Open DMs - tags MUST be gone!"),console.log("=".repeat(60))}catch(e){console.error("[HideGuildTags] CRITICAL ERROR:",e)}},P=function(){console.log("[HideGuildTags] Unloading..."),l.forEach(function(e){try{e()}catch{}}),l=[],console.log("[HideGuildTags] \u2713 Unloaded")};return d.onLoad=U,d.onUnload=P,d.settings=R,d})({},vendetta.patcher,vendetta.metro,vendetta.plugin,vendetta.metro.common,vendetta.storage);
