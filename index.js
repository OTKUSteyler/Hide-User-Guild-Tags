(function(p,d,u,T,l,P){"use strict";const{View:f,Text:g,TextInput:H,TouchableOpacity:G,ScrollView:m,StyleSheet:b}=l.ReactNative;function U(){P.useProxy(T.storage);const e=T.storage;e.whitelist||(e.whitelist=[]);const[o,s]=l.React.useState(""),t=function(){const n=o.trim();n&&(e.whitelist.includes(n)||(e.whitelist.push(n),s("")))},r=function(n){e.whitelist=e.whitelist.filter(function(h){return h!==n})},i=b.create({container:{flex:1,padding:16,backgroundColor:"#1e1e1e"},section:{marginBottom:24},sectionTitle:{fontSize:14,fontWeight:"600",color:"#b9bbbe",marginBottom:8,textTransform:"uppercase"},card:{backgroundColor:"#2f3136",borderRadius:8,padding:12,marginBottom:8},input:{backgroundColor:"#202225",color:"#dcddde",borderRadius:4,padding:12,fontSize:16,marginBottom:8},button:{backgroundColor:"#5865f2",borderRadius:4,padding:12,alignItems:"center"},buttonDisabled:{backgroundColor:"#4e5058"},buttonText:{color:"#ffffff",fontSize:16,fontWeight:"600"},userRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"#2f3136",borderRadius:8,padding:12,marginBottom:8},userId:{color:"#dcddde",fontSize:16,flex:1},removeButton:{backgroundColor:"#ed4245",borderRadius:4,padding:8,paddingHorizontal:12},removeButtonText:{color:"#ffffff",fontSize:14,fontWeight:"600"},emptyText:{color:"#72767d",fontSize:14,textAlign:"center",padding:16}});return l.React.createElement(m,{style:i.container},l.React.createElement(f,{style:i.section},l.React.createElement(g,{style:i.sectionTitle},"Add User to Whitelist"),l.React.createElement(f,{style:i.card},l.React.createElement(H,{style:i.input,value:o,onChangeText:s,placeholder:"Enter User ID",placeholderTextColor:"#72767d"}),l.React.createElement(G,{style:[i.button,!o.trim()&&i.buttonDisabled],onPress:t,disabled:!o.trim()},l.React.createElement(g,{style:i.buttonText},"Add User")))),l.React.createElement(f,{style:i.section},l.React.createElement(g,{style:i.sectionTitle},"Whitelisted Users (",e.whitelist.length,")"),e.whitelist.length===0?l.React.createElement(g,{style:i.emptyText},"No users whitelisted",`
`,"Guild tags hidden for all users"):e.whitelist.map(function(n){return l.React.createElement(f,{key:n,style:i.userRow},l.React.createElement(g,{style:i.userId},n),l.React.createElement(G,{style:i.removeButton,onPress:function(){return r(n)}},l.React.createElement(g,{style:i.removeButtonText},"Remove")))})))}const y=T.storage;y.whitelist||(y.whitelist=[]);const c=function(e){const o=y.whitelist??[];return e?!o.includes(e):!0};let a=[];const w=function(){console.log("[HideGuildTags] Starting plugin...");try{try{const e=u.findByProps("GuildTag");if(e?.GuildTag){const o=d.after("GuildTag",e,function(s,t){try{const r=s?.[0]?.user;return r&&c(r.id)?null:t}catch(r){return console.error("[HideGuildTags] GuildTag patch error:",r),t}});a.push(o),console.log("[HideGuildTags] \u2713 Patched GuildTag")}else console.warn("[HideGuildTags] \u26A0 GuildTag module not found")}catch(e){console.error("[HideGuildTags] Failed to patch GuildTag:",e)}try{const e=u.findByProps("Username");if(e?.Username){const o=d.after("Username",e,function(s,t){try{const r=s?.[0]?.user;return t?.props?.guildTag&&r&&c(r.id)&&(t.props.guildTag=null),t}catch(r){return console.error("[HideGuildTags] Username patch error:",r),t}});a.push(o),console.log("[HideGuildTags] \u2713 Patched Username")}else console.warn("[HideGuildTags] \u26A0 Username module not found")}catch(e){console.error("[HideGuildTags] Failed to patch Username:",e)}try{const e=u.findByProps("UserProfile");if(e?.UserProfile){const o=d.after("UserProfile",e,function(s,t){try{const r=s?.[0]?.user;if(t?.props?.guildTag&&r&&c(r.id)&&(t.props.guildTag=null),t?.props?.children){const i=function(n){return n&&(Array.isArray(n)?n.map(i).filter(function(h){return!(h?.type?.name==="GuildTag"||h?.props?.isGuildTag)}):(n?.props&&(n.props.guildTag&&(n.props.guildTag=null),n.props.children&&(n.props.children=i(n.props.children))),n))};t.props.children=i(t.props.children)}return t}catch(r){return console.error("[HideGuildTags] UserProfile patch error:",r),t}});a.push(o),console.log("[HideGuildTags] \u2713 Patched UserProfile")}else console.warn("[HideGuildTags] \u26A0 UserProfile module not found")}catch(e){console.error("[HideGuildTags] Failed to patch UserProfile:",e)}try{const e=u.findByProps("MemberListItem");if(e?.MemberListItem){const o=d.after("MemberListItem",e,function(s,t){try{const r=s?.[0]?.user;return t?.props?.guildTag&&r&&c(r.id)&&(t.props.guildTag=null),t}catch(r){return console.error("[HideGuildTags] MemberListItem patch error:",r),t}});a.push(o),console.log("[HideGuildTags] \u2713 Patched MemberListItem")}else console.warn("[HideGuildTags] \u26A0 MemberListItem module not found")}catch(e){console.error("[HideGuildTags] Failed to patch MemberListItem:",e)}try{const e=u.findByProps("PrivateChannel");if(e?.PrivateChannel){const o=d.after("PrivateChannel",e,function(s,t){try{const r=s?.[0]?.user;return t?.props?.guildTag&&r&&c(r.id)&&(t.props.guildTag=null),t}catch(r){return console.error("[HideGuildTags] PrivateChannel patch error:",r),t}});a.push(o),console.log("[HideGuildTags] \u2713 Patched PrivateChannel")}else console.warn("[HideGuildTags] \u26A0 PrivateChannel module not found")}catch(e){console.error("[HideGuildTags] Failed to patch PrivateChannel:",e)}try{const e=u.findByProps("UserPopout");if(e?.UserPopout){const o=d.after("UserPopout",e,function(s,t){try{const r=s?.[0]?.user;return t?.props?.guildTag&&r&&c(r.id)&&(t.props.guildTag=null),t}catch(r){return console.error("[HideGuildTags] UserPopout patch error:",r),t}});a.push(o),console.log("[HideGuildTags] \u2713 Patched UserPopout")}else console.warn("[HideGuildTags] \u26A0 UserPopout module not found")}catch(e){console.error("[HideGuildTags] Failed to patch UserPopout:",e)}try{const e=u.findByProps("Message","default");if(e?.default){const o=d.after("default",e,function(s,t){try{const r=s?.[0]?.author;return t?.props?.guildTag&&r&&c(r.id)&&(t.props.guildTag=null),t}catch(r){return console.error("[HideGuildTags] Message patch error:",r),t}});a.push(o),console.log("[HideGuildTags] \u2713 Patched Message")}else console.warn("[HideGuildTags] \u26A0 Message module not found")}catch(e){console.error("[HideGuildTags] Failed to patch Message:",e)}console.log("[HideGuildTags] \u2713 Plugin loaded successfully"),console.log(`[HideGuildTags] Applied ${a.length} patches`)}catch(e){throw console.error("[HideGuildTags] Critical load error:",e),e}},R=function(){console.log("[HideGuildTags] Unloading plugin...");try{a.forEach(function(e,o){try{typeof e=="function"&&e()}catch(s){console.warn(`[HideGuildTags] Failed to unpatch ${o}:`,s)}}),a=[],console.log("[HideGuildTags] \u2713 Plugin unloaded cleanly")}catch(e){console.error("[HideGuildTags] Unload error:",e)}};return p.onLoad=w,p.onUnload=R,p.settings=U,p})({},vendetta.patcher,vendetta.metro,vendetta.plugin,vendetta.metro.common,vendetta.storage);
